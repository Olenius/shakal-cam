<!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shakal Cam Gallery</title><style>:root{--background-color:#000;--text-color:#fff;--accent-color:#444;--danger-color:#ff3b30}body,html{margin:0;padding:0;background-color:var(--background-color);color:var(--text-color);font-family:monospace}.header{padding:20px;display:flex;justify-content:space-between;align-items:center}.header h1{margin:0}.header-buttons{display:flex;gap:10px}.button{background-color:var(--text-color);color:var(--background-color);border:none;padding:10px 20px;font-size:18px;font-weight:700;cursor:pointer;font-family:monospace;text-decoration:none;display:inline-block;box-shadow:5px 5px 0 0 rgba(0,0,0,.2)}.button:hover{box-shadow:4px 4px 0 0 rgba(0,0,0,.3)}.button:active{box-shadow:0 0 0 0 rgba(0,0,0,.3);transform:translate(5px,5px)}.button-danger{background-color:var(--danger-color)}.storage-info{background-color:var(--accent-color);padding:10px;margin-bottom:20px;text-align:center}.gallery-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;padding:20px}.gallery-item{position:relative;overflow:hidden;background-color:var(--accent-color);border-radius:4px;transition:transform .2s}.gallery-item:hover{transform:scale(1.02)}.gallery-item a{display:block;text-decoration:none}.gallery-item img{width:100%;aspect-ratio:1;object-fit:cover;display:block}.gallery-item .info{padding:10px;color:var(--text-color);font-size:12px;display:flex;justify-content:space-between}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);z-index:100;align-items:center;justify-content:center}.modal-content{background-color:var(--background-color);border:2px solid var(--text-color);padding:20px;max-width:400px;text-align:center}.modal-buttons{margin-top:20px;display:flex;justify-content:center;gap:10px}@media (max-width:600px){.gallery-container{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.header{flex-direction:column;gap:10px}.header-buttons{width:100%;flex-direction:column}.button{width:100%;text-align:center}}</style><div class="header"><h1>Shakal Gallery</h1><div class="header-buttons"><button id="deleteAllBtn" class="button button-danger">Delete All Photos</button> <a href="/settings" class="button">Settings</a> <a href="/" class="button">Back to Camera</a></div></div><div id="storage-info" class="storage-info"></div><div class="gallery-container" id="gallery"></div><div id="confirmModal" class="modal"><div class="modal-content"><h2>Delete All Photos</h2><p>Are you sure you want to delete all photos? This action cannot be undone.<div class="modal-buttons"><button id="cancelDeleteBtn" class="button">Cancel</button> <button id="confirmDeleteBtn" class="button button-danger">Delete All</button></div></div></div><script>async function loadGallery(){const e=document.getElementById("gallery");try{const t=await fetch("/photo-list"),n=await t.json();n&&n.files&&n.files.length>0?(n.files.sort().reverse(),e.innerHTML=n.files.map((e=>{const t=e.size?`${Math.round(e.size/1024)} KB`:"";return`\n                          <div class="gallery-item">\n                              <a href="/photo/${e.name}" target="_blank">\n                                  <img src="/photo/${e.name}" loading="lazy" alt="${e.name}">\n                                  <div class="info">\n                                      <span>${e.name.split("/").pop()}</span>\n                                      <span>${t}</span>\n                                  </div>\n                              </a>\n                          </div>\n                      `})).join(""),n.storage&&(document.getElementById("storage-info").innerHTML=n.storage)):e.innerHTML='<p style="grid-column: 1/-1; text-align: center;">No photos found</p>'}catch(t){console.error("Error loading gallery:",t),e.innerHTML='<p style="grid-column: 1/-1; text-align: center;">Error loading gallery</p>'}}async function deleteAllPhotos(){try{const e=await fetch("/delete-all-photos",{method:"POST"}),t=await e.json();t.success?(loadGallery(),alert(`Successfully deleted ${t.deletedFiles} photos`)):alert("Failed to delete photos")}catch(e){console.error("Error deleting photos:",e),alert("Error deleting photos. Please try again.")}}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("confirmModal"),t=document.getElementById("deleteAllBtn"),n=document.getElementById("cancelDeleteBtn"),l=document.getElementById("confirmDeleteBtn");t.addEventListener("click",(function(){e.style.display="flex"})),n.addEventListener("click",(function(){e.style.display="none"})),l.addEventListener("click",(function(){e.style.display="none",deleteAllPhotos()})),window.addEventListener("click",(function(t){t.target===e&&(e.style.display="none")})),loadGallery()}))</script>