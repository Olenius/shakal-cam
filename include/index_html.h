#ifndef INDEX_HTML_H
#define INDEX_HTML_H


const char* getIndexHTML() {
    static const char html[] = R"rawliteral(
        <!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shakal Cam</title><link rel="icon" type="image/png" id="favicon" href="#"><style>:root{--font-size:24px;--background-color:#000;--text-color:#fff}body,html{width:100%;height:100%;margin:0;padding:0;background-color:var(--background-color);font-family:monospace}.container{width:100%;height:100%;display:flex;justify-content:center;align-items:center;position:relative}.controls{position:absolute;bottom:20px;left:20px;right:20px;display:flex;justify-content:space-between;align-items:center;gap:1rem}.controls__group{display:flex;align-items:center;gap:1rem}.time-elapsed{color:var(--text-color);font-size:var(--font-size);font-weight:700;margin-left:10px}.button{background-color:var(--text-color);color:var(--background-color);border:none;padding:10px 20px;font-size:var(--font-size);font-weight:700;cursor:pointer;font-family:monospace;box-shadow:5px 5px 0 0 var(--background-color)/50%}.button:active{box-shadow:0 0 0 0 var(--background-color)/50%;transform:translate(5px,5px)}.image{width:100%;height:100%;aspect-ratio:1.5;object-fit:cover}@media (max-width:768px){.controls{top:10px;bottom:10px;flex-direction:column;--font-size:18px}}</style><div class="container"><img src="#" width="640" height="480" class="image js-image" onload=""><div class="controls"><div class="controls__group"><span class="js-time-elapsed time-elapsed">00:00</span> <span class="js-fps time-elapsed">0 FPS</span></div><div class="controls__group"><button class="button js-flashlight-button">Flash off</button> <button class="button js-control-button">Stop</button> <button class="button js-capture-button">Capture</button> <a href="/gallery" class="button">Gallery</a></div></div></div><script>const INTERVAL_MS=1e3;let currentHost=window.location.host,isPaused=!1,isFlashOn=!1,dataUrl=null;const controlButton=document.querySelector(".js-control-button"),captureButton=document.querySelector(".js-capture-button"),flashlightButton=document.querySelector(".js-flashlight-button"),image=document.querySelector(".js-image"),timeElapsedElement=document.querySelector(".js-time-elapsed"),fpsElement=document.querySelector(".js-fps");function updateImage(){const t=new Date,e=`http://${currentHost}/capture`;image.src=`${e}?t=${t.getTime()}`,image.onload=()=>{image.style.opacity=1;const e=(new Date).getTime()-t;timeElapsedElement.innerText=`${e}ms`;const a=1e3/e;fpsElement.innerText=`${a.toFixed(2)} FPS`,captureImage(image)}}function flash(){return new Promise(((t,e)=>{fetch(`http://${currentHost}/flash`).then((()=>{setTimeout((()=>{fetch(`http://${currentHost}/flash`)}),300)})),setTimeout((()=>{t()}),200)}))}function captureImage(t){const e=document.createElement("canvas");e.width=t.naturalWidth,e.height=t.naturalHeight;e.getContext("2d").drawImage(t,0,0),dataUrl=e.toDataURL("image/png"),localStorage.setItem("lastimage",dataUrl);const a=document.createElement("canvas");a.width=32,a.height=32;a.getContext("2d").drawImage(t,0,0,32,32);const n=a.toDataURL("image/png");document.getElementById("favicon").href=n}localStorage.getItem("lastimage")&&(image.src=localStorage.getItem("lastimage"),image.style.opacity=.5),controlButton.addEventListener("click",(()=>{isPaused=!isPaused,controlButton.innerText=isPaused?"Resume":"Pause"})),captureButton.addEventListener("click",(async()=>{if(!dataUrl)return;isPaused=!0,isFlashOn&&await flash(),updateImage();const t=document.createElement("a");t.href=dataUrl,t.download=`capture_${(new Date).toISOString()}.png`,document.body.appendChild(t),t.click(),document.body.removeChild(t),isPaused=!1})),flashlightButton.addEventListener("click",(()=>{isFlashOn?(isFlashOn=!1,flashlightButton.innerText="Flash off"):(isFlashOn=!0,flashlightButton.innerText="Flash on")})),setInterval((()=>{isPaused||updateImage()}),1e3)</script>
    )rawliteral";

    return html;
}

const char* getGalleryHTML() {
    static const char html[] = R"rawliteral(
        <!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shakal Cam Gallery</title><style>:root{--background-color:#000;--text-color:#fff;--accent-color:#444;--danger-color:#ff3b30}body,html{margin:0;padding:0;background-color:var(--background-color);color:var(--text-color);font-family:monospace}.header{padding:20px;display:flex;justify-content:space-between;align-items:center}.header h1{margin:0}.header-buttons{display:flex;gap:10px}.button{background-color:var(--text-color);color:var(--background-color);border:none;padding:10px 20px;font-size:18px;font-weight:700;cursor:pointer;font-family:monospace;text-decoration:none;display:inline-block;box-shadow:5px 5px 0 0 rgba(0,0,0,.2)}.button:hover{box-shadow:4px 4px 0 0 rgba(0,0,0,.3)}.button:active{box-shadow:0 0 0 0 rgba(0,0,0,.3);transform:translate(5px,5px)}.button-danger{background-color:var(--danger-color)}.storage-info{background-color:var(--accent-color);padding:10px;margin-bottom:20px;text-align:center}.gallery-container{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px;padding:20px}.gallery-item{position:relative;overflow:hidden;background-color:var(--accent-color);border-radius:4px;transition:transform .2s}.gallery-item:hover{transform:scale(1.02)}.gallery-item a{display:block;text-decoration:none}.gallery-item img{width:100%;aspect-ratio:1;object-fit:cover;display:block}.gallery-item .info{padding:10px;color:var(--text-color);font-size:12px;display:flex;justify-content:space-between}.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:rgba(0,0,0,.7);z-index:100;align-items:center;justify-content:center}.modal-content{background-color:var(--background-color);border:2px solid var(--text-color);padding:20px;max-width:400px;text-align:center}.modal-buttons{margin-top:20px;display:flex;justify-content:center;gap:10px}@media (max-width:600px){.gallery-container{grid-template-columns:repeat(auto-fill,minmax(140px,1fr))}.header{flex-direction:column;gap:10px}.header-buttons{width:100%;flex-direction:column}.button{width:100%;text-align:center}}</style><div class="header"><h1>Shakal Gallery</h1><div class="header-buttons"><button id="deleteAllBtn" class="button button-danger">Delete All Photos</button> <a href="/settings" class="button">Settings</a> <a href="/" class="button">Back to Camera</a></div></div><div id="storage-info" class="storage-info"></div><div class="gallery-container" id="gallery"></div><div id="confirmModal" class="modal"><div class="modal-content"><h2>Delete All Photos</h2><p>Are you sure you want to delete all photos? This action cannot be undone.<div class="modal-buttons"><button id="cancelDeleteBtn" class="button">Cancel</button> <button id="confirmDeleteBtn" class="button button-danger">Delete All</button></div></div></div><script>async function loadGallery(){const e=document.getElementById("gallery");try{const t=await fetch("/photo-list"),n=await t.json();n&&n.files&&n.files.length>0?(n.files.sort().reverse(),e.innerHTML=n.files.map((e=>{const t=e.size?`${Math.round(e.size/1024)} KB`:"";return`\n                          <div class="gallery-item">\n                              <a href="/photo/${e.name}" target="_blank">\n                                  <img src="/photo/${e.name}" loading="lazy" alt="${e.name}">\n                                  <div class="info">\n                                      <span>${e.name.split("/").pop()}</span>\n                                      <span>${t}</span>\n                                  </div>\n                              </a>\n                          </div>\n                      `})).join(""),n.storage&&(document.getElementById("storage-info").innerHTML=n.storage)):e.innerHTML='<p style="grid-column: 1/-1; text-align: center;">No photos found</p>'}catch(t){console.error("Error loading gallery:",t),e.innerHTML='<p style="grid-column: 1/-1; text-align: center;">Error loading gallery</p>'}}async function deleteAllPhotos(){try{const e=await fetch("/delete-all-photos",{method:"POST"}),t=await e.json();t.success?(loadGallery(),alert(`Successfully deleted ${t.deletedFiles} photos`)):alert("Failed to delete photos")}catch(e){console.error("Error deleting photos:",e),alert("Error deleting photos. Please try again.")}}document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("confirmModal"),t=document.getElementById("deleteAllBtn"),n=document.getElementById("cancelDeleteBtn"),l=document.getElementById("confirmDeleteBtn");t.addEventListener("click",(function(){e.style.display="flex"})),n.addEventListener("click",(function(){e.style.display="none"})),l.addEventListener("click",(function(){e.style.display="none",deleteAllPhotos()})),window.addEventListener("click",(function(t){t.target===e&&(e.style.display="none")})),loadGallery()}))</script>
    )rawliteral";

    return html;
}

const char* getSettingsHTML() {
    static const char html[] = R"rawliteral(
        <!DOCTYPE html><html lang="en"><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Shakal Cam Settings</title><style>:root{--background-color:#000;--text-color:#fff;--accent-color:#444;--success-color:#28a745}body,html{margin:0;padding:0;background-color:var(--background-color);color:var(--text-color);font-family:monospace}.header{padding:20px;display:flex;justify-content:space-between;align-items:center}.header h1{margin:0}.header-buttons{display:flex;gap:10px}.button{background-color:var(--text-color);color:var(--background-color);border:none;padding:10px 20px;font-size:18px;font-weight:700;cursor:pointer;font-family:monospace;text-decoration:none;display:inline-block;box-shadow:5px 5px 0 0 rgba(0,0,0,.2)}.button:hover{box-shadow:4px 4px 0 0 rgba(0,0,0,.3)}.button:active{box-shadow:0 0 0 0 rgba(0,0,0,.3);transform:translate(5px,5px)}.button-success{background-color:var(--success-color);color:#fff}.settings-container{padding:20px;max-width:800px;margin:0 auto}.settings-section{margin-bottom:30px;background-color:var(--accent-color);padding:20px;border-radius:4px}.settings-section h2{margin-top:0;margin-bottom:15px;border-bottom:1px solid var(--text-color);padding-bottom:10px}.palette-container{display:flex;flex-wrap:wrap;gap:10px;margin-bottom:20px}.color-picker{display:flex;flex-direction:column;align-items:center;gap:5px}.color-block{width:60px;height:60px;border:2px solid var(--text-color);position:relative;cursor:pointer}.color-input{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;cursor:pointer}.preview-section{margin-top:20px;display:flex;justify-content:center;flex-direction:column;align-items:center}.preview-gradient{width:100%;height:60px;background:linear-gradient(to right,#000,#222,#444,#666,#888,#aaa,#ccc,#fff);margin-bottom:20px}.preview-color-values{display:flex;flex-wrap:wrap;gap:10px;font-size:12px;margin-top:10px;width:100%}.preview-color-value{background:rgba(255,255,255,.1);padding:5px;border-radius:3px}.notification{position:fixed;top:20px;right:20px;padding:10px 20px;background-color:var(--success-color);color:#fff;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,.2);transform:translateY(-100px);opacity:0;transition:transform .3s,opacity .3s}.notification.show{transform:translateY(0);opacity:1}@media (max-width:600px){.header{flex-direction:column;gap:10px}.header-buttons{width:100%;flex-direction:column}.button{width:100%;text-align:center}.palette-container{justify-content:center}}</style><div class="header"><h1>Settings</h1><div class="header-buttons"><button id="resetPaletteBtn" class="button">Reset Palette</button> <button id="savePaletteBtn" class="button button-success">Save Changes</button> <a href="/" class="button">Back to Camera</a> <a href="/gallery" class="button">Gallery</a></div></div><div class="settings-container"><div class="settings-section"><h2>Color Palette Settings</h2><p>Customize the 8-color palette used for image processing:<div class="palette-container" id="palette-container"></div><div class="preview-section"><h3>Preview</h3><div class="preview-gradient" id="preview-gradient"></div><div class="preview-color-values" id="preview-color-values"></div></div></div><div class="settings-section"><h2>Block Size Settings</h2><p>Adjust the pixelation level (1 = no pixelation, 16 = maximum pixelation):<div style="display:flex;align-items:center;gap:15px;margin-bottom:20px"><label for="blockSizeSlider" style="min-width:100px">Block Size:</label> <input type="range" id="blockSizeSlider" min="1" max="16" value="2" style="flex:1;height:30px;background:var(--accent-color);outline:0"> <span id="blockSizeValue" style="min-width:30px;font-weight:700">2</span></div><div style="display:flex;gap:10px"><button id="resetBlockSizeBtn" class="button">Reset Block Size</button></div></div></div><div id="notification" class="notification">Settings saved successfully!</div><script>let palette=[{r:13,g:43,b:69,a:255},{r:32,g:60,b:86,a:255},{r:84,g:78,b:104,a:255},{r:141,g:105,b:122,a:255},{r:208,g:129,b:89,a:255},{r:255,g:170,b:94,a:255},{r:255,g:212,b:163,a:255},{r:255,g:236,b:214,a:255}],blockSize=2;function initPalette(){const e=document.getElementById("palette-container");e.innerHTML="",palette.forEach(((t,o)=>{const a=document.createElement("div");a.className="color-picker";const n=document.createElement("div");n.className="color-block",n.style.backgroundColor=`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a/255})`;const i=document.createElement("input");i.type="color",i.className="color-input",i.value=rgbToHex(t.r,t.g,t.b),i.dataset.index=o,i.addEventListener("input",handleColorChange),n.appendChild(i),a.appendChild(n),e.appendChild(a)})),updatePreviewGradient(),updateColorValues()}function handleColorChange(e){const t=parseInt(e.target.dataset.index),o=hexToRgb(e.target.value);palette[t]={r:o.r,g:o.g,b:o.b,a:255};e.target.parentElement.style.backgroundColor=`rgba(${o.r}, ${o.g}, ${o.b}, 1)`,updatePreviewGradient(),updateColorValues()}function rgbToHex(e,t,o){return"#"+[e,t,o].map((e=>{const t=e.toString(16);return 1===t.length?"0"+t:t})).join("")}function hexToRgb(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function updatePreviewGradient(){const e=document.getElementById("preview-gradient"),t=palette.map(((e,t)=>{const o=t/(palette.length-1)*100;return`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a/255}) ${o}%`})).join(", ");e.style.background=`linear-gradient(to right, ${t})`}function updateColorValues(){const e=document.getElementById("preview-color-values");e.innerHTML="",palette.forEach(((t,o)=>{const a=document.createElement("div");a.className="preview-color-value",a.textContent=`${o}: RGB(${t.r}, ${t.g}, ${t.b})`,a.style.color=getBrightness(t)<128?"#fff":"#000",a.style.backgroundColor=`rgba(${t.r}, ${t.g}, ${t.b}, ${t.a/255})`,e.appendChild(a)}))}function getBrightness(e){return Math.sqrt(e.r*e.r*.299+e.g*e.g*.587+e.b*e.b*.114)}async function savePalette(){try{(await fetch("/save-palette",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({palette:palette})})).ok?showNotification("Palette saved successfully!"):showNotification("Failed to save palette","error")}catch(e){console.error("Error saving palette:",e),showNotification("Error saving palette","error")}}async function saveAllSettings(){try{const e=await fetch("/save-palette",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({palette:palette})}),t=await fetch("/save-block-size",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockSize:blockSize})});e.ok&&t.ok?showNotification("All settings saved successfully!"):showNotification("Failed to save some settings","error")}catch(e){console.error("Error saving settings:",e),showNotification("Error saving settings","error")}}async function resetPalette(){try{const e=await fetch("/reset-palette",{method:"POST"});if(e.ok){const t=await e.json();t.palette&&(palette=t.palette,initPalette(),showNotification("Palette reset to default values"))}else showNotification("Failed to reset palette","error")}catch(e){console.error("Error resetting palette:",e),showNotification("Error resetting palette","error")}}async function loadPalette(){try{const e=await fetch("/get-palette");if(e.ok){const t=await e.json();t.palette&&(palette=t.palette)}}catch(e){console.error("Error loading palette:",e)}initPalette()}function initBlockSize(){const e=document.getElementById("blockSizeSlider"),t=document.getElementById("blockSizeValue");e.value=blockSize,t.textContent=blockSize,e.addEventListener("input",(e=>{blockSize=parseInt(e.target.value),t.textContent=blockSize}))}async function saveBlockSize(){try{(await fetch("/save-block-size",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({blockSize:blockSize})})).ok?showNotification("Block size saved successfully!"):showNotification("Failed to save block size","error")}catch(e){console.error("Error saving block size:",e),showNotification("Error saving block size","error")}}async function resetBlockSize(){try{const e=await fetch("/reset-block-size",{method:"POST"});if(e.ok){const t=await e.json();void 0!==t.blockSize&&(blockSize=t.blockSize,initBlockSize(),showNotification("Block size reset to default value"))}else showNotification("Failed to reset block size","error")}catch(e){console.error("Error resetting block size:",e),showNotification("Error resetting block size","error")}}async function loadBlockSize(){try{const e=await fetch("/get-block-size");if(e.ok){const t=await e.json();void 0!==t.blockSize&&(blockSize=t.blockSize)}}catch(e){console.error("Error loading block size:",e)}initBlockSize()}function showNotification(e,t="success"){const o=document.getElementById("notification");o.textContent=e,o.style.backgroundColor="success"===t?"var(--success-color)":"var(--danger-color)",o.classList.add("show"),setTimeout((()=>{o.classList.remove("show")}),3e3)}document.addEventListener("DOMContentLoaded",(()=>{loadPalette(),loadBlockSize(),document.getElementById("savePaletteBtn").addEventListener("click",saveAllSettings),document.getElementById("resetPaletteBtn").addEventListener("click",resetPalette),document.getElementById("resetBlockSizeBtn").addEventListener("click",resetBlockSize)}))</script>
    )rawliteral";

    return html;
}

#endif // INDEX_HTML_H
